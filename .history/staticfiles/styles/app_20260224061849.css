/* Consolidated styles: base + dashboard + login + register */

/* base.html */

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --red:       #8C1515;
      --red-dark:  #6A0F0F;
      --red-muted: #F5E6E6;
      --red-glow:  rgba(140,21,21,0.35);
      --navy:      #252422;
      --navy-dark: #1a1917;
      --navy-mid:  #2e2b28;
      --gold:      #C9A84C;
      --gold-light:#E8C97A;
      --stone:     #F6F4F1;
      --stone-mid: #E8E3DC;
      --white:     #ffffff;
      --sidebar-w: 17rem;
      --sidebar-collapsed-w: 4.5rem;
      --topbar-h: 68px;
    }

    html, body {
      height: 100%;
      overflow-x: hidden;
    }

    body {
      font-family: "Poppins", system-ui, sans-serif;
      background: var(--stone);
      color: var(--navy);
      -webkit-font-smoothing: antialiased;
    }

    /* ── Scrollbar ─────────────────────────── */
    ::-webkit-scrollbar { width: 4px; height: 4px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: rgba(140,21,21,0.3); border-radius: 99px; }
    ::-webkit-scrollbar-thumb:hover { background: rgba(140,21,21,0.5); }

    /* ═══════════════════════════════════════
       LAYOUT — the core fix
       Sidebar is fixed; main content uses
       a left padding/margin that matches the
       sidebar width, so nothing overflows.
    ═══════════════════════════════════════ */

    #sidebar {
      position: fixed;
      left: 0; top: 0;
      width: var(--sidebar-w);
      height: 100vh;
      background: linear-gradient(180deg, #252422 0%, #1a1917 55%, #1e100f 100%);
      transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1),
                  transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      z-index: 50;
      overflow: hidden;
    }

    /* Collapsed desktop */
    #sidebar.is-collapsed { width: var(--sidebar-collapsed-w); }

    /* Mobile: hidden off-screen by default */
    @media (max-width: 1023px) {
      #sidebar { transform: translateX(-100%); width: var(--sidebar-w) !important; }
      #sidebar.mobile-open { transform: translateX(0); }
    }

    /* Red glow + noise grain */
    #sidebar::before {
      content: '';
      position: absolute; inset: 0;
      background:
        radial-gradient(ellipse 260px 400px at 100% 20%, rgba(140,21,21,0.28) 0%, transparent 60%),
        radial-gradient(ellipse 200px 300px at 0% 85%,  rgba(201,168,76,0.06) 0%, transparent 55%);
      pointer-events: none; z-index: 0;
    }
    #sidebar::after {
      content: '';
      position: absolute; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none; z-index: 0;
    }

    /* ── Main wrapper ── */
    #mainContent {
      margin-left: var(--sidebar-w);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    #mainContent.sidebar-collapsed { margin-left: var(--sidebar-collapsed-w); }

    @media (max-width: 1023px) {
      #mainContent { margin-left: 0 !important; }
    }

    /* ─── Nav items ─────────────────────────── */
    .nav-item { position: relative; }

    .nav-item a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 12px;
      border-radius: 10px;
      color: rgba(255,255,255,0.45);       /* dim inactive */
      font-size: 0.825rem;
      font-weight: 500;
      text-decoration: none;
      transition: background 0.18s ease, color 0.18s ease, box-shadow 0.18s ease;
      position: relative;
      white-space: nowrap;
    }

    /* Hover — slightly brighter, subtle bg */
    .nav-item a:hover {
      background: rgba(255,255,255,0.06);
      color: rgba(255,255,255,0.78);
    }

    /* Active — clearly selected */
    .nav-item a.active {
      background: rgba(140,21,21,0.25);
      color: #ffffff;
      box-shadow: inset 0 0 0 1px rgba(140,21,21,0.4),
                  0 4px 14px rgba(140,21,21,0.12);
    }

    /* Active left accent bar */
    .nav-item a.active::before {
      content: '';
      position: absolute;
      left: 0; top: 50%;
      transform: translateY(-50%);
      width: 3px; height: 60%;
      background: var(--red);
      border-radius: 0 3px 3px 0;
      box-shadow: 0 0 10px var(--red-glow);
    }

    .nav-icon {
      width: 18px; height: 18px;
      flex-shrink: 0;
      opacity: 0.5;                        /* dim icons when inactive */
      transition: opacity 0.18s ease;
    }
    .nav-item a:hover .nav-icon  { opacity: 0.75; }
    .nav-item a.active .nav-icon { opacity: 1; }

    .nav-item a .nav-text {
      transition: width 0.3s cubic-bezier(0.4,0,0.2,1), opacity 0.2s ease;
    }
    .tooltip {
      position: absolute;
      left: calc(100% + 14px); top: 50%;
      transform: translateY(-50%);
      background: #1a1917;
      color: rgba(255,255,255,0.9);
      font-size: 0.72rem; font-weight: 600;
      padding: 5px 10px; border-radius: 7px;
      white-space: nowrap;
      opacity: 0; pointer-events: none;
      transition: opacity 0.15s;
      border: 1px solid rgba(255,255,255,0.08);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 99;
    }
    .tooltip::before {
      content: '';
      position: absolute; right: 100%; top: 50%;
      transform: translateY(-50%);
      border: 5px solid transparent;
      border-right-color: #1a1917;
    }
    /* Only show tooltip when sidebar is collapsed */
    #sidebar.is-collapsed .nav-item:hover .tooltip { opacity: 1; }
    #sidebar:not(.is-collapsed) .tooltip           { display: none; }

    /* ─── Sidebar section label ── */
    .sidebar-section-label {
      font-size: 0.6rem; font-weight: 800;
      letter-spacing: 0.12em; text-transform: uppercase;
      color: rgba(255,255,255,0.2);
      padding: 0 12px; margin-bottom: 6px;
      white-space: nowrap; overflow: hidden;
      transition: opacity 0.2s ease;
    }

    /* ── Collapsed state ── */

    /* Nav link: center icon, remove gap */
    #sidebar.is-collapsed .nav-item a {
      justify-content: center;
      padding: 10px;
      gap: 0;
    }

    /* Nav text spans: collapse to zero width so icon truly centers */
    #sidebar.is-collapsed .nav-item a .nav-text {
      width: 0;
      overflow: hidden;
      opacity: 0;
      pointer-events: none;
      flex-shrink: 0;
      white-space: nowrap;
    }

    /* Section labels: fully hidden */
    #sidebar.is-collapsed .sidebar-section-label {
      opacity: 0;
      pointer-events: none;
      height: 0;
      margin: 0;
      overflow: hidden;
    }

    /* Footer: center avatar, collapse text + logout */
    #sidebar.is-collapsed #sidebarFooterText,
    #sidebar.is-collapsed #sidebarFooterLogout {
      width: 0;
      overflow: hidden;
      opacity: 0;
      pointer-events: none;
      flex-shrink: 0;
    }

    /* Icon stays full size and centered */
    #sidebar.is-collapsed .nav-icon {
      flex-shrink: 0;
    }

    /* ─── Toggle btn ── */
    .toggle-btn {
      width: 30px; height: 30px;
      display: flex; align-items: center; justify-content: center;
      background: rgba(255,255,255,0.07);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px; cursor: pointer;
      color: rgba(255,255,255,0.5);
      transition: background 0.2s, color 0.2s;
      flex-shrink: 0;
    }
    .toggle-btn:hover { background: rgba(255,255,255,0.13); color: #fff; }

    /* ═══════════════════════════════════════
       HEADER
    ═══════════════════════════════════════ */
    #topbar {
      position: sticky; top: 0; z-index: 30;
      background: rgba(246,244,241,0.92);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      border-bottom: 1px solid var(--stone-mid);
      transition: box-shadow 0.3s;
      width: 100%;                         /* fills whatever space mainContent gives */
    }
    #topbar.scrolled { box-shadow: 0 2px 20px rgba(0,0,0,0.07); }

    /* Search */
    .search-input {
      background: var(--stone); border: 1.5px solid var(--stone-mid);
      border-radius: 9px; font-family: "Poppins", sans-serif;
      font-size: 0.8rem; color: var(--navy); outline: none;
      transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
    }
    .search-input:focus {
      border-color: var(--red); background: white;
      box-shadow: 0 0 0 3px rgba(140,21,21,0.08);
    }
    .search-input::placeholder { color: #bbb; }
    .search-results {
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      width: 360px;
      max-height: 360px;
      overflow-y: auto;
      background: #fff;
      border: 1px solid var(--stone-mid);
      border-radius: 12px;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
      z-index: 80;
      padding: 6px;
    }
    .search-result-item {
      display: block;
      text-decoration: none;
      border-radius: 8px;
      padding: 9px 10px;
      color: var(--navy);
      transition: background 0.15s ease;
    }
    .search-result-item:hover,
    .search-result-item.active { background: var(--stone); }
    .search-result-line {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      font-size: 0.75rem;
      color: #777;
      margin-top: 2px;
    }
    .search-result-title {
      font-size: 0.8rem;
      font-weight: 700;
      color: var(--navy);
      line-height: 1.2;
    }
    .search-risk-pill {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.64rem;
      font-weight: 700;
      letter-spacing: 0.02em;
      white-space: nowrap;
    }
    .search-risk-pill.high { background: rgba(140,21,21,0.1); color: var(--red); }
    .search-risk-pill.medium { background: #fef3c7; color: #92400e; }
    .search-risk-pill.low { background: rgba(5,150,105,0.12); color: #059669; }
    .search-empty {
      font-size: 0.76rem;
      color: #888;
      padding: 10px 12px;
    }
    @media (max-width: 1200px) {
      .search-results { width: 320px; }
    }

    /* Icon buttons */
    .hbtn {
      width: 36px; height: 36px;
      display: flex; align-items: center; justify-content: center;
      border-radius: 9px; border: none; background: transparent;
      cursor: pointer; color: #888;
      transition: background 0.2s, color 0.2s;
    }
    .hbtn:hover { background: var(--stone-mid); color: var(--navy); }

    /* User avatar */
    .user-avatar {
      width: 36px; height: 36px;
      background: linear-gradient(135deg, var(--navy) 0%, var(--navy-mid) 100%);
      border-radius: 9px; display: flex; align-items: center;
      justify-content: center; font-weight: 800; font-size: 0.78rem;
      color: #fff; border: 2px solid var(--stone-mid); flex-shrink: 0;
      cursor: pointer; transition: border-color 0.2s, box-shadow 0.2s;
    }
    .user-avatar:hover {
      border-color: var(--red);
      box-shadow: 0 0 0 3px rgba(140,21,21,0.1);
    }

    /* Dropdown */
    #userDropdown {
      position: absolute; right: 0; top: calc(100% + 10px);
      width: 210px; background: white;
      border: 1px solid var(--stone-mid); border-radius: 14px;
      box-shadow: 0 16px 40px rgba(0,0,0,0.1);
      overflow: hidden; z-index: 60;
    }
    .dropdown-item {
      display: flex; align-items: center; gap: 10px;
      padding: 10px 16px; font-size: 0.8rem; font-weight: 500;
      color: #555; text-decoration: none;
      transition: background 0.15s, color 0.15s;
      cursor: pointer; border: none; background: none;
      width: 100%; text-align: left;
    }
    .dropdown-item:hover { background: var(--stone); color: var(--navy); }
    .dropdown-item.danger { color: var(--red); }
    .dropdown-item.danger:hover { background: var(--red-muted); color: var(--red-dark); }
    .dropdown-divider { height: 1px; background: var(--stone-mid); margin: 4px 0; }

    /* ═══════════════════════════════════════
       MAIN CONTENT
    ═══════════════════════════════════════ */
    main { padding: 1.75rem 2rem; flex: 1; }

    @media (max-width: 640px) { main { padding: 1.25rem; } }

    /* Alerts */
    .alert {
      display: flex; align-items: flex-start; gap: 10px;
      padding: 12px 16px; border-radius: 10px;
      font-size: 0.82rem; font-weight: 500; margin-bottom: 16px;
    }
    .alert-error   { background: #fef2f2; border: 1px solid #fecaca; color: #991b1b; }
    .alert-success { background: #f0fdf4; border: 1px solid #bbf7d0; color: #166534; }
    .alert-info    { background: #eff6ff; border: 1px solid #bfdbfe; color: #1e40af; }

    /* Notification dot */
    .notif-dot {
      position: absolute; top: 6px; right: 6px;
      width: 7px; height: 7px;
      background: var(--red); border-radius: 50%;
      border: 2px solid var(--stone);
    }

    /* Mobile overlay */
    #mobileOverlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.45);
      backdrop-filter: blur(4px);
      z-index: 40; opacity: 0; pointer-events: none;
      transition: opacity 0.3s;
    }
    #mobileOverlay.visible { opacity: 1; pointer-events: all; }

    @keyframes pulse-dot {
      0%,100% { opacity: 1; transform: scale(1); }
      50%      { opacity: 0.5; transform: scale(1.5); }
    }
    .pulse-dot { animation: pulse-dot 2s ease-in-out infinite; }
  

/* core/dashboard.html */

  :root {
    --red:       #8C1515;
    --red-dark:  #6A0F0F;
    --red-muted: #F5E6E6;
    --red-glow:  rgba(140,21,21,0.18);
    --navy:      #252422;
    --navy-dark: #1a1917;
    --gold:      #C9A84C;
    --gold-light:#E8C97A;
    --stone:     #F6F4F1;
    --stone-mid: #E8E3DC;
    --white:     #ffffff;
  }

  .dash { padding: 1.75rem 2rem 3rem; display: flex; flex-direction: column; gap: 1.75rem; }

  .section-label {
    display: inline-flex; align-items: center; gap: 7px;
    font-size: 0.6rem; font-weight: 800; letter-spacing: 0.14em;
    text-transform: uppercase; color: var(--red); margin-bottom: 0.875rem;
  }
  .section-label::before { content: ''; width: 14px; height: 2px; background: var(--red); border-radius: 2px; }

  /* ═══════════════════════════════════════
     KPI CARDS — dark brand gradient + coin
  ═══════════════════════════════════════ */
  .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }

  .kpi-card {
    border-radius: 16px;
    padding: 1.4rem 1.45rem;
    display: flex; flex-direction: column; gap: 0;
    position: relative; overflow: hidden;
    border: 1px solid transparent;
    transition: transform 0.28s cubic-bezier(0.34,1.5,0.64,1), box-shadow 0.28s;
  }
  .kpi-card:hover { transform: translateY(-4px); }

  /* Top shimmer line */
  .kpi-card::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 1.5px;
    border-radius: 16px 16px 0 0;
    z-index: 1;
  }

  /* All inner content above decorations */
  .kpi-header, .kpi-value, .kpi-label, .kpi-sub { position: relative; z-index: 2; }

  /* ── navy — Total Customers ── */
  .kpi-card.navy {
    background: linear-gradient(145deg, #2e2b28 0%, #252422 40%, #1a1917 100%);
    box-shadow: 0 8px 30px rgba(20,18,16,0.4), inset 0 1px 0 rgba(255,255,255,0.06);
    border-color: rgba(255,255,255,0.07);
  }
  .kpi-card.navy::before { background: linear-gradient(90deg, rgba(255,255,255,0.18), transparent 70%); }

  .kpi-card.navy:hover   { box-shadow: 0 18px 48px rgba(20,18,16,0.5), inset 0 1px 0 rgba(255,255,255,0.06); }

  /* ── red — Predicted Churn ── */
  .kpi-card.red {
    background: linear-gradient(145deg, #2e2b28 0%, #271010 45%, #1e0808 100%);
    box-shadow: 0 8px 30px rgba(140,21,21,0.28), inset 0 1px 0 rgba(140,21,21,0.2);
    border-color: rgba(140,21,21,0.22);
  }
  .kpi-card.red::before { background: linear-gradient(90deg, rgba(140,21,21,0.9), rgba(192,57,43,0.4) 60%, transparent); }

  .kpi-card.red:hover   { box-shadow: 0 18px 48px rgba(140,21,21,0.38), inset 0 1px 0 rgba(140,21,21,0.2); }

  /* ── gold — Revenue at Risk ── */
  .kpi-card.gold {
    background: linear-gradient(145deg, #2e2b28 0%, #241c0a 45%, #1a1306 100%);
    box-shadow: 0 8px 30px rgba(201,168,76,0.22), inset 0 1px 0 rgba(201,168,76,0.18);
    border-color: rgba(201,168,76,0.2);
  }
  .kpi-card.gold::before { background: linear-gradient(90deg, rgba(201,168,76,0.9), rgba(232,201,122,0.4) 60%, transparent); }

  .kpi-card.gold:hover   { box-shadow: 0 18px 48px rgba(201,168,76,0.32), inset 0 1px 0 rgba(201,168,76,0.18); }

  /* ── green — Model Confidence ── */
  .kpi-card.green {
    background: linear-gradient(145deg, #2e2b28 0%, #0d1e16 45%, #081410 100%);
    box-shadow: 0 8px 30px rgba(5,150,105,0.22), inset 0 1px 0 rgba(5,150,105,0.18);
    border-color: rgba(5,150,105,0.2);
  }
  .kpi-card.green::before { background: linear-gradient(90deg, rgba(5,150,105,0.9), rgba(16,185,129,0.4) 60%, transparent); }

  .kpi-card.green:hover   { box-shadow: 0 18px 48px rgba(5,150,105,0.32), inset 0 1px 0 rgba(5,150,105,0.18); }

  /* ── KPI inner elements (all on dark bg) ── */
  .kpi-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem; }

  .kpi-icon {
    width: 38px; height: 38px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }
  .kpi-icon.navy  { background: rgba(255,255,255,0.09); border: 1px solid rgba(255,255,255,0.1); }
  .kpi-icon.red   { background: rgba(140,21,21,0.35);   border: 1px solid rgba(140,21,21,0.4); }
  .kpi-icon.gold  { background: rgba(201,168,76,0.22);  border: 1px solid rgba(201,168,76,0.3); }
  .kpi-icon.green { background: rgba(5,150,105,0.25);   border: 1px solid rgba(5,150,105,0.35); }

  .kpi-badge {
    font-size: 0.62rem; font-weight: 800; padding: 3px 9px;
    border-radius: 999px; letter-spacing: 0.04em;
  }
  .kpi-badge.up   { background: rgba(5,150,105,0.22);   color: #34d399; border: 1px solid rgba(52,211,153,0.22); }
  .kpi-badge.down { background: rgba(140,21,21,0.3);    color: #f87171; border: 1px solid rgba(248,113,113,0.22); }
  .kpi-badge.flat { background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.5); border: 1px solid rgba(255,255,255,0.1); }

  .kpi-value {
    font-family: 'Playfair Display', serif; font-weight: 900;
    font-size: 2rem; color: #ffffff; line-height: 1; letter-spacing: -0.02em;
    margin-bottom: 5px;
    animation: kpiIn 0.55s cubic-bezier(0.34,1.2,0.64,1) both;
  }
  .kpi-card:nth-child(1) .kpi-value { animation-delay: 0.05s; }
  .kpi-card:nth-child(2) .kpi-value { animation-delay: 0.13s; }
  .kpi-card:nth-child(3) .kpi-value { animation-delay: 0.21s; }
  .kpi-card:nth-child(4) .kpi-value { animation-delay: 0.29s; }
  @keyframes kpiIn { from { opacity:0; transform:translateY(10px); } to { opacity:1; transform:translateY(0); } }

  .kpi-label { font-size: 0.72rem; font-weight: 600; color: rgba(255,255,255,0.42); letter-spacing: 0.02em; }
  .kpi-sub   { font-size: 0.67rem; color: rgba(255,255,255,0.25); margin-top: 7px; }

  /* ── KPI icon stroke colors on dark bg ── */
  .kpi-icon.navy  svg { stroke: rgba(255,255,255,0.75); }
  .kpi-icon.red   svg { stroke: #f87171; }
  .kpi-icon.gold  svg { stroke: var(--gold-light); }
  .kpi-icon.green svg { stroke: #34d399; }

  /* ═══════════════════════════════════════
     REST OF DASHBOARD (unchanged)
  ═══════════════════════════════════════ */
  .chart-grid-4 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
  .chart-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }

  .chart-card {
    background: var(--white); border: 1px solid var(--stone-mid);
    border-radius: 14px; padding: 1.35rem 1.4rem;
    transition: box-shadow 0.25s;
  }
  .chart-card:hover { box-shadow: 0 12px 32px rgba(0,0,0,0.06); }
  .chart-card-header { display: flex; align-items: flex-start; justify-content: space-between; margin-bottom: 1.1rem; }
  .chart-card-title { font-weight: 800; font-size: 0.875rem; color: var(--navy); margin-bottom: 2px; }
  .chart-card-sub   { font-size: 0.7rem; color: #aaa; font-weight: 400; }
  .chart-tag {
    font-size: 0.6rem; font-weight: 800; letter-spacing: 0.08em;
    text-transform: uppercase; padding: 3px 9px; border-radius: 999px;
    background: var(--red-muted); color: var(--red);
  }
  .chart-wrap { position: relative; }

  .action-grid { display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 1rem; }

  .risk-table { width: 100%; border-collapse: collapse; }
  .risk-table th { font-size: 0.63rem; font-weight: 800; text-transform: uppercase; letter-spacing: 0.1em; color: #bbb; padding: 0 12px 10px; text-align: left; }
  .risk-table td { padding: 11px 12px; border-top: 1px solid var(--stone-mid); }
  .risk-table tr:hover td { background: var(--stone); }
  .risk-table tr:first-child td { border-top: none; }

  .customer-av {
    width: 32px; height: 32px; border-radius: 9px;
    display: flex; align-items: center; justify-content: center;
    font-weight: 800; font-size: 0.65rem; color: #fff; flex-shrink: 0;
  }
  .risk-pill { display: inline-flex; align-items: center; gap: 5px; padding: 3px 9px; border-radius: 999px; font-size: 0.65rem; font-weight: 800; }
  .risk-pill.high   { background: rgba(140,21,21,0.1); color: var(--red); }
  .risk-pill.medium { background: #fef3c7; color: #92400e; }
  .risk-pill.low    { background: rgba(5,150,105,0.1); color: #059669; }
  .risk-pill::before { content: ''; width: 5px; height: 5px; border-radius: 50%; background: currentColor; }

  .btn-contact {
    font-size: 0.68rem; font-weight: 700; padding: 5px 12px;
    border-radius: 7px; border: 1.5px solid var(--stone-mid);
    background: transparent; color: var(--navy); cursor: pointer; transition: all 0.18s;
  }
  .btn-contact:hover { border-color: var(--red); color: var(--red); background: var(--red-muted); }

  .insight-card {
    background: var(--stone); border: 1px solid var(--stone-mid);
    border-radius: 12px; padding: 1rem 1.1rem;
    display: flex; gap: 12px; align-items: flex-start;
    transition: border-color 0.2s, background 0.2s; margin-bottom: 0.6rem;
  }
  .insight-card:last-child { margin-bottom: 0; }
  .insight-card:hover { border-color: rgba(140,21,21,0.2); background: white; }
  .insight-icon { width: 34px; height: 34px; border-radius: 9px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
  .insight-icon.alert { background: var(--red-muted); }
  .insight-icon.tip   { background: rgba(201,168,76,0.12); }
  .insight-icon.info  { background: rgba(5,150,105,0.1); }
  .insight-title { font-size: 0.78rem; font-weight: 800; color: var(--navy); margin-bottom: 3px; }
  .insight-body  { font-size: 0.72rem; color: #666; line-height: 1.55; }
  .insight-tag { display: inline-block; margin-top: 6px; font-size: 0.58rem; font-weight: 800; letter-spacing: 0.08em; text-transform: uppercase; padding: 2px 7px; border-radius: 4px; }
  .insight-tag.urgent  { background: var(--red-muted); color: var(--red); }
  .insight-tag.monitor { background: #fef3c7; color: #92400e; }
  .insight-tag.good    { background: rgba(5,150,105,0.1); color: #059669; }

  .fi-bar-row { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
  .fi-bar-row:last-child { margin-bottom: 0; }
  .fi-label { font-size: 0.73rem; font-weight: 600; color: var(--navy); width: 140px; flex-shrink: 0; }
  .fi-track { flex: 1; height: 8px; background: var(--stone-mid); border-radius: 99px; overflow: hidden; }
  .fi-fill  { height: 100%; border-radius: 99px; transition: width 1.2s cubic-bezier(0.34,1.1,0.64,1); width: 0; }
  .fi-pct   { font-size: 0.7rem; font-weight: 800; color: var(--navy); width: 38px; text-align: right; flex-shrink: 0; }

  .sim-card {
    background: linear-gradient(160deg, #252422 0%, #1a1917 55%, #1e100f 100%);
    border-radius: 14px; padding: 1.5rem 1.6rem; position: relative; overflow: hidden;
  }
  .sim-card::before {
    content: ''; position: absolute; inset: 0; pointer-events: none;
    background: radial-gradient(ellipse 300px 250px at 100% 0%, rgba(140,21,21,0.3) 0%, transparent 60%);
  }
  .sim-card::after {
    content: ''; position: absolute; inset: 0; pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
  }
  .sim-inner { position: relative; z-index: 2; }
  .sim-title { font-family:'Playfair Display',serif; font-weight:900; font-size:1.05rem; color:#fff; margin-bottom:3px; letter-spacing:-0.02em; }
  .sim-sub   { font-size:0.72rem; color:rgba(255,255,255,0.42); margin-bottom:1.25rem; }
  .sim-field { margin-bottom: 1rem; }
  .sim-field:last-of-type { margin-bottom: 1.25rem; }
  .sim-label { font-size: 0.65rem; font-weight: 700; color: rgba(255,255,255,0.5); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 5px; display: flex; justify-content: space-between; }
  .sim-label span { color: rgba(255,255,255,0.85); font-weight: 800; }
  .sim-range { -webkit-appearance: none; width: 100%; height: 4px; border-radius: 99px; background: rgba(255,255,255,0.12); outline: none; cursor: pointer; }
  .sim-range::-webkit-slider-thumb { -webkit-appearance: none; width: 16px; height: 16px; border-radius: 50%; background: var(--red); border: 2px solid rgba(255,255,255,0.4); box-shadow: 0 0 8px var(--red-glow); cursor: pointer; transition: transform 0.15s; }
  .sim-range::-webkit-slider-thumb:hover { transform: scale(1.15); }
  .sim-result { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; padding: 1rem 1.2rem; display: flex; align-items: center; gap: 16px; }
  .gauge-ring { position: relative; width: 64px; height: 64px; flex-shrink: 0; }
  .gauge-ring svg { width: 64px; height: 64px; transform: rotate(-90deg); }
  .gauge-track { fill: none; stroke: rgba(255,255,255,0.1); stroke-width: 6; }
  .gauge-fill  { fill: none; stroke-width: 6; stroke-linecap: round; transition: stroke-dashoffset 0.6s cubic-bezier(0.34,1.1,0.64,1); }
  .gauge-text  { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; }
  .gauge-pct   { font-family:'Playfair Display',serif; font-weight:900; font-size:1rem; color:#fff; line-height:1; }
  .gauge-sub2  { font-size:0.5rem; color:rgba(255,255,255,0.4); font-weight:600; letter-spacing:0.05em; text-transform:uppercase; }
  .sim-verdict { flex:1; }
  .sim-verdict-label { font-size:0.65rem; font-weight:700; color:rgba(255,255,255,0.45); letter-spacing:0.08em; text-transform:uppercase; margin-bottom:4px; }
  .sim-verdict-val   { font-size:1rem; font-weight:800; color:#fff; margin-bottom:4px; }
  .sim-verdict-desc  { font-size:0.7rem; color:rgba(255,255,255,0.42); line-height:1.5; }

  @media (max-width:1280px) {
    .chart-grid-4 { grid-template-columns: repeat(2,1fr); }
    .action-grid { grid-template-columns: 1fr; }
    .chart-grid-2 { grid-template-columns: 1fr; }
  }
  @media (max-width:1024px) {
    .kpi-grid { grid-template-columns: repeat(2,1fr); }
  }
  @media (max-width:768px) {
    .dash { padding: 1.25rem; gap: 1.25rem; }
    .kpi-grid { grid-template-columns: repeat(2,1fr); gap:0.75rem; }
    .chart-grid-4 { grid-template-columns: 1fr; }
    .chart-grid-2 { grid-template-columns: 1fr; }
  }
  @media (max-width:480px) {
    .kpi-grid { grid-template-columns: 1fr; }
    .fi-label { width: 100px; font-size:0.65rem; }
  }


/* core/login.html */

      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        --red: #8c1515;
        --red-dark: #6a0f0f;
        --red-muted: #f5e6e6;
        --red-glow: rgba(140, 21, 21, 0.35);
        --navy: #252422;
        --navy-dark: #1a1917;
        --navy-mid: #2e2b28;
        --gold: #c9a84c;
        --gold-light: #e8c97a;
        --stone: #f6f4f1;
        --stone-mid: #e8e3dc;
        --white: #ffffff;
      }

      body.login-page {
        height: 100%;
        font-family: "Poppins", sans-serif;
        background: var(--stone);
        overflow: hidden;
      }

      /* ── LAYOUT ── */
      body.login-page .page {
        display: grid;
        grid-template-columns: 1fr 1fr;
        height: 100vh;
        width: 100vw;
      }

      /* ══════════════════════════
       LEFT PANEL
    ══════════════════════════ */
      .panel-left {
        position: relative;
        overflow: hidden;
        background: linear-gradient(
          160deg,
          #252422 0%,
          #1a1917 50%,
          #2a1010 100%
        );
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 3rem 3.5rem;
      }

      /* Red radial glow */
      .panel-left::before {
        content: "";
        position: absolute;
        inset: 0;
        background:
          radial-gradient(
            ellipse 700px 600px at 110% 30%,
            rgba(140, 21, 21, 0.45) 0%,
            transparent 60%
          ),
          radial-gradient(
            ellipse 400px 400px at -10% 80%,
            rgba(201, 168, 76, 0.08) 0%,
            transparent 55%
          );
        pointer-events: none;
      }

      /* Noise grain */
      .panel-left::after {
        content: "";
        position: absolute;
        inset: 0;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
        pointer-events: none;
      }

      /* Decorative arcs — like the reference */
      .arcs {
        position: absolute;
        top: -80px;
        right: -120px;
        width: 600px;
        height: 600px;
        pointer-events: none;
        opacity: 0.1;
      }
      .arcs circle {
        fill: none;
        stroke: rgba(255, 255, 255, 0.6);
        stroke-width: 1;
      }

      /* Left content */
      .left-content {
        position: relative;
        z-index: 2;
      }

      /* Logo */
      .logo {
        display: flex;
        align-items: center;
        gap: 9px;
        text-decoration: none;
        opacity: 0;
        animation: fadeUp 0.6s 0.1s forwards;
      }
      .logo-icon {
        width: 36px;
        height: 36px;
        background: var(--red);
        border-radius: 9px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 0 20px var(--red-glow);
      }
      .logo-text {
        font-weight: 800;
        font-size: 1.1rem;
        color: var(--white);
        letter-spacing: -0.02em;
      }
      .logo-text span {
        color: var(--red);
      }

      /* Hero text */
      .left-hero {
        position: relative;
        z-index: 2;
        margin-top: auto;
        padding-bottom: 1rem;
      }
      .left-tag {
        display: inline-flex;
        align-items: center;
        gap: 7px;
        background: rgba(140, 21, 21, 0.2);
        border: 1px solid rgba(140, 21, 21, 0.4);
        border-radius: 999px;
        padding: 4px 12px;
        font-size: 0.6rem;
        font-weight: 700;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        color: rgba(255, 255, 255, 0.7);
        margin-bottom: 1.5rem;
        opacity: 0;
        animation: fadeUp 0.6s 0.25s forwards;
      }
      .left-tag::before {
        content: "";
        width: 5px;
        height: 5px;
        border-radius: 50%;
        background: var(--red);
        animation: pulse-dot 2s ease-in-out infinite;
      }

      .left-title {
        font-family: "Playfair Display", serif;
        font-weight: 900;
        font-size: clamp(2.4rem, 3.5vw, 3.6rem);
        line-height: 1.06;
        color: var(--white);
        letter-spacing: -0.02em;
        margin-bottom: 1.5rem;
        opacity: 0;
        animation: fadeUp 0.6s 0.35s forwards;
      }
      .left-title em {
        font-style: italic;
        color: var(--gold-light);
      }
      .left-title .wave {
        font-style: normal;
      }

      .left-desc {
        font-size: 0.875rem;
        line-height: 1.75;
        color: rgba(255, 255, 255, 0.42);
        max-width: 360px;
        opacity: 0;
        animation: fadeUp 0.6s 0.45s forwards;
      }

      /* Stats strip at bottom of left */
      .left-stats {
        position: relative;
        z-index: 2;
        display: flex;
        gap: 28px;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.06);
        opacity: 0;
        animation: fadeUp 0.6s 0.55s forwards;
      }
      .lstat {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }
      .lstat-num {
        font-family: "Playfair Display", serif;
        font-weight: 700;
        font-size: 1.3rem;
        color: var(--white);
        line-height: 1;
      }
      .lstat-num span {
        color: #e6abab;
      }
      .lstat-label {
        font-size: 0.62rem;
        color: rgba(255, 255, 255, 0.32);
        font-weight: 500;
        letter-spacing: 0.04em;
      }
      .lstat-divider {
        width: 1px;
        background: rgba(255, 255, 255, 0.08);
        align-self: stretch;
      }

      /* Copyright */
      .left-copy {
        position: relative;
        z-index: 2;
        font-size: 0.68rem;
        color: rgba(255, 255, 255, 0.22);
        font-weight: 400;
        margin-top: 1.25rem;
      }

      /* ══════════════════════════
       RIGHT PANEL
    ══════════════════════════ */
      .panel-right {
        background: var(--white);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 3rem 3.5rem;
        position: relative;
        overflow: hidden;
      }

      /* Subtle decorative circle in top-right corner */
      .panel-right::before {
        content: "";
        position: absolute;
        top: -100px;
        right: -100px;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        background: radial-gradient(
          circle,
          rgba(140, 21, 21, 0.04) 0%,
          transparent 70%
        );
        pointer-events: none;
      }

      .form-wrap {
        width: 100%;
        max-width: 400px;
        position: relative;
        z-index: 2;
      }

      /* Brand mark on right */
      .right-brand {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 2.75rem;
        opacity: 0;
        animation: fadeUp 0.6s 0.15s forwards;
      }
      .right-brand-icon {
        width: 30px;
        height: 30px;
        background: var(--red);
        border-radius: 7px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .right-brand-text {
        font-weight: 800;
        font-size: 0.95rem;
        color: var(--navy);
        letter-spacing: -0.02em;
      }
      .right-brand-text span {
        color: var(--red);
      }

      /* Form heading */
      .form-heading {
        opacity: 0;
        animation: fadeUp 0.6s 0.25s forwards;
        margin-bottom: 2rem;
      }
      .form-heading h1 {
        font-family: "Playfair Display", serif;
        font-weight: 900;
        font-size: 2rem;
        color: var(--navy);
        letter-spacing: -0.025em;
        margin-bottom: 0.5rem;
        line-height: 1.1;
      }
      .form-heading p {
        font-size: 0.8rem;
        color: #888;
        line-height: 1.6;
      }
      .form-heading p a {
        color: var(--red);
        font-weight: 600;
        text-decoration: none;
      }
      .form-heading p a:hover {
        text-decoration: underline;
      }

      /* Form fields */
      .form-body {
        display: flex;
        flex-direction: column;
        gap: 1.1rem;
        opacity: 0;
        animation: fadeUp 0.6s 0.35s forwards;
      }
      .form-row.two-col {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.85rem;
      }
      .centered-field {
        width: 100%;
        margin: 0;
      }
      .register-page .panel-right {
        align-items: flex-start;
        padding-top: 4.5rem;
        height: 100vh;
        overflow-y: auto;
        overflow-x: hidden;
      }
      .register-page .form-wrap {
        max-width: 560px;
        margin: 0.5rem auto 2rem;
      }
      body.login-page.register-page {
        overflow: hidden;
      }
      body.login-page.register-page .page {
        min-height: 100vh;
        height: 100vh;
      }
      .register-page .register-form {
        width: 100%;
        max-width: 520px;
        margin: 0 auto;
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .field label {
        font-size: 0.72rem;
        font-weight: 700;
        color: var(--navy);
        letter-spacing: 0.04em;
        text-transform: uppercase;
      }
      .field-input-wrap {
        position: relative;
        display: flex;
        align-items: center;
      }
      .field-icon {
        position: absolute;
        left: 14px;
        color: #aaa;
        display: flex;
        align-items: center;
        pointer-events: none;
        transition: color 0.2s;
      }
      .field input {
        width: 100%;
        padding: 0.8rem 1rem 0.8rem 2.75rem;
        border: 1.5px solid var(--stone-mid);
        border-radius: 10px;
        font-family: "Poppins", sans-serif;
        font-size: 0.875rem;
        color: var(--navy);
        background: var(--stone);
        transition:
          border-color 0.2s,
          background 0.2s,
          box-shadow 0.2s;
        outline: none;
      }
      .field input::placeholder {
        color: #bbb;
      }
      .field input:focus {
        border-color: var(--red);
        background: var(--white);
        box-shadow: 0 0 0 3px rgba(140, 21, 21, 0.08);
      }
      .field input:focus + .field-icon,
      .field-input-wrap:focus-within .field-icon {
        color: var(--red);
      }

      /* Password toggle */
      .pw-toggle {
        position: absolute;
        right: 14px;
        background: none;
        border: none;
        cursor: pointer;
        color: #bbb;
        display: flex;
        align-items: center;
        transition: color 0.2s;
        padding: 0;
      }
      .pw-toggle:hover {
        color: var(--navy);
      }

      /* Forgot password row */
      .forgot-row {
        display: flex;
        justify-content: flex-end;
        margin-top: -4px;
      }
      .forgot-link {
        font-size: 0.75rem;
        color: #999;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.2s;
      }
      .forgot-link:hover {
        color: var(--red);
      }

      /* Submit button */
      .btn-login {
        width: 100%;
        padding: 0.9rem;
        background: var(--navy);
        color: var(--white);
        font-family: "Poppins", sans-serif;
        font-weight: 700;
        font-size: 0.9rem;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition:
          background 0.2s,
          transform 0.15s,
          box-shadow 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        letter-spacing: 0.01em;
        margin-top: 0.5rem;
        position: relative;
        overflow: hidden;
      }
      .btn-login::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
          135deg,
          rgba(140, 21, 21, 0.15) 0%,
          transparent 60%
        );
        opacity: 0;
        transition: opacity 0.2s;
      }
      .btn-login:hover {
        background: var(--red);
        transform: translateY(-1px);
        box-shadow: 0 8px 28px rgba(140, 21, 21, 0.35);
      }
      .btn-login:hover::after {
        opacity: 1;
      }
      .btn-login:active {
        transform: translateY(0);
      }

      /* Divider */
      .divider {
        display: flex;
        align-items: center;
        gap: 12px;
        margin: 0.25rem 0;
      }
      .divider::before,
      .divider::after {
        content: "";
        flex: 1;
        height: 1px;
        background: var(--stone-mid);
      }
      .divider span {
        font-size: 0.68rem;
        color: #ccc;
        font-weight: 500;
        white-space: nowrap;
      }

      /* Sign up link */
      .signup-row {
        text-align: center;
        font-size: 0.78rem;
        color: #999;
        margin-top: 1rem;
        opacity: 0;
        animation: fadeUp 0.6s 0.45s forwards;
      }
      .signup-row a {
        color: var(--red);
        font-weight: 700;
        text-decoration: none;
      }
      .signup-row a:hover {
        text-decoration: underline;
      }

      /* Error state */
      .field.error input {
        border-color: var(--red);
        background: var(--white);
      }
      .field-error {
        font-size: 0.68rem;
        color: var(--red);
        font-weight: 600;
        display: none;
      }
      .field.error .field-error {
        display: block;
      }

      /* Loading spinner on button */
      .spinner {
        display: none;
        width: 16px;
        height: 16px;
        border: 2px solid rgba(255, 255, 255, 0.35);
        border-top-color: #fff;
        border-radius: 50%;
        animation: spin 0.7s linear infinite;
      }
      .btn-login.loading .btn-text {
        display: none;
      }
      .btn-login.loading .spinner {
        display: block;
      }

      /* ── ANIMATIONS ── */
      @keyframes fadeUp {
        from {
          opacity: 0;
          transform: translateY(18px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes pulse-dot {
        0%,
        100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.7);
          opacity: 0.4;
        }
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      @keyframes shimmerArc {
        0% {
          stroke-dashoffset: 1600;
        }
        100% {
          stroke-dashoffset: 0;
        }
      }

      /* Animated arcs draw-on */
      .arcs .arc-animate {
        stroke-dasharray: 1600;
        stroke-dashoffset: 1600;
        animation: shimmerArc 3s ease forwards;
      }
      .arcs .a1 {
        animation-delay: 0.2s;
      }
      .arcs .a2 {
        animation-delay: 0.5s;
      }
      .arcs .a3 {
        animation-delay: 0.8s;
      }
      .arcs .a4 {
        animation-delay: 1.1s;
      }

      /* ── RESPONSIVE ── */
      @media (max-width: 900px) {
        body.login-page {
          overflow: auto;
        }
        body.login-page.register-page {
          overflow: auto;
        }
        body.login-page .page {
          grid-template-columns: 1fr;
          grid-template-rows: auto 1fr;
          height: auto;
          min-height: 100vh;
        }
        body.login-page.register-page .page {
          height: auto;
          min-height: 100vh;
        }
        .panel-left {
          padding: 2.5rem 2rem;
          min-height: 340px;
        }
        .left-hero {
          margin-top: 2rem;
        }
        .left-title {
          font-size: 2rem;
        }
        .left-stats {
          gap: 18px;
        }
        .panel-right {
          padding: 3rem 2rem;
          overflow: auto;
        }
        .form-row.two-col {
          grid-template-columns: 1fr;
        }
        .centered-field {
          max-width: 100%;
        }
        .register-page .panel-right {
          padding-top: 3rem;
          height: auto;
          overflow: visible;
        }
        .register-page .register-form {
          max-width: 100%;
        }
      }

/* dashboard/risk_level.html */

  :root {
    --red:       #8C1515;
    --red-dark:  #6A0F0F;
    --red-muted: #F5E6E6;
    --red-glow:  rgba(140,21,21,0.2);
    --navy:      #252422;
    --navy-dark: #1a1917;
    --navy-mid:  #2e2b28;
    --gold:      #C9A84C;
    --gold-light:#E8C97A;
    --stone:     #F6F4F1;
    --stone-mid: #E8E3DC;
    --white:     #ffffff;
  }

  .risk-page {
    padding: 1.75rem 2rem 3rem;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    width: 100%;
    max-width: 100%;
    overflow-x: hidden;
  }

  /* ── Section label ── */
  .section-label {
    display: inline-flex; align-items: center; gap: 7px;
    font-size: 0.6rem; font-weight: 800; letter-spacing: 0.14em;
    text-transform: uppercase; color: var(--red); margin-bottom: 0.85rem;
  }
  .section-label::before { content:''; width:14px; height:2px; background:var(--red); border-radius:2px; }

  /* ═══════════════════════════════════════
     SUMMARY MINI-CARDS
  ═══════════════════════════════════════ */
  .summary-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.875rem;
  }

  .summary-card {
    border-radius: 14px; padding: 1.1rem 1.25rem;
    position: relative; overflow: hidden;
    border: 1px solid transparent;
    transition: transform 0.22s cubic-bezier(0.34,1.5,0.64,1), box-shadow 0.22s;
  }
  .summary-card:hover { transform: translateY(-3px); }

  /* top shimmer */
  .summary-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1.5px;
    border-radius: 14px 14px 0 0; z-index: 1;
  }

  .summary-card.total {
    background: linear-gradient(145deg, #2e2b28 0%, #252422 45%, #1a1917 100%);
    box-shadow: 0 6px 24px rgba(20,18,16,0.38), inset 0 1px 0 rgba(255,255,255,0.05);
    border-color: rgba(255,255,255,0.07);
  }
  .summary-card.total::before { background: linear-gradient(90deg, rgba(255,255,255,0.18), transparent 70%); }
  .summary-card.total:hover   { box-shadow: 0 14px 36px rgba(20,18,16,0.48); }

  .summary-card.high {
    background: linear-gradient(145deg, #2e2b28 0%, #271010 45%, #1e0808 100%);
    box-shadow: 0 6px 24px rgba(140,21,21,0.25), inset 0 1px 0 rgba(140,21,21,0.18);
    border-color: rgba(140,21,21,0.22);
  }
  .summary-card.high::before { background: linear-gradient(90deg, rgba(140,21,21,0.9), rgba(192,57,43,0.35) 60%, transparent); }
  .summary-card.high:hover   { box-shadow: 0 14px 36px rgba(140,21,21,0.35); }

  .summary-card.medium {
    background: linear-gradient(145deg, #2e2b28 0%, #241c0a 45%, #1a1306 100%);
    box-shadow: 0 6px 24px rgba(201,168,76,0.2), inset 0 1px 0 rgba(201,168,76,0.15);
    border-color: rgba(201,168,76,0.2);
  }
  .summary-card.medium::before { background: linear-gradient(90deg, rgba(201,168,76,0.9), rgba(232,201,122,0.35) 60%, transparent); }
  .summary-card.medium:hover   { box-shadow: 0 14px 36px rgba(201,168,76,0.3); }

  .summary-card.low {
    background: linear-gradient(145deg, #2e2b28 0%, #0d1e16 45%, #081410 100%);
    box-shadow: 0 6px 24px rgba(5,150,105,0.2), inset 0 1px 0 rgba(5,150,105,0.15);
    border-color: rgba(5,150,105,0.2);
  }
  .summary-card.low::before { background: linear-gradient(90deg, rgba(5,150,105,0.9), rgba(16,185,129,0.35) 60%, transparent); }
  .summary-card.low:hover   { box-shadow: 0 14px 36px rgba(5,150,105,0.3); }

  .summary-icon {
    width: 34px; height: 34px; border-radius: 9px;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0; margin-bottom: 0.75rem;
  }
  .summary-card.total  .summary-icon { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1); }
  .summary-card.high   .summary-icon { background: rgba(140,21,21,0.35); border: 1px solid rgba(140,21,21,0.4); }
  .summary-card.medium .summary-icon { background: rgba(201,168,76,0.22); border: 1px solid rgba(201,168,76,0.3); }
  .summary-card.low    .summary-icon { background: rgba(5,150,105,0.25); border: 1px solid rgba(5,150,105,0.35); }

  .summary-value {
    font-family: 'Playfair Display', serif; font-weight: 900;
    font-size: 1.7rem; color: #fff; line-height: 1; letter-spacing: -0.02em;
    margin-bottom: 4px; position: relative; z-index: 2;
    animation: fadeUp 0.5s cubic-bezier(0.34,1.2,0.64,1) both;
  }
  .summary-card:nth-child(1) .summary-value { animation-delay: 0.04s; }
  .summary-card:nth-child(2) .summary-value { animation-delay: 0.1s; }
  .summary-card:nth-child(3) .summary-value { animation-delay: 0.16s; }
  .summary-card:nth-child(4) .summary-value { animation-delay: 0.22s; }
  @keyframes fadeUp { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }

  .summary-label { font-size: 0.7rem; font-weight: 600; color: rgba(255,255,255,0.4); position: relative; z-index: 2; }
  .summary-sub   { font-size: 0.63rem; color: rgba(255,255,255,0.23); margin-top: 5px; position: relative; z-index: 2; }

  /* ═══════════════════════════════════════
     FILTER BAR
  ═══════════════════════════════════════ */
  .filter-bar {
    background: var(--white);
    border: 1px solid var(--stone-mid);
    border-radius: 14px;
    padding: 1.1rem 1.4rem;
    display: flex; align-items: center; gap: 0.75rem;
    flex-wrap: wrap;
  }

  .filter-label {
    font-size: 0.63rem; font-weight: 800; letter-spacing: 0.1em;
    text-transform: uppercase; color: #bbb; white-space: nowrap;
    margin-right: 0.25rem;
  }

  .filter-select {
    appearance: none; -webkit-appearance: none;
    background: var(--stone) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' viewBox='0 0 24 24'%3E%3Cpath stroke='%23aaa' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/%3E%3C/svg%3E") no-repeat right 10px center;
    border: 1.5px solid var(--stone-mid);
    border-radius: 9px; padding: 7px 32px 7px 12px;
    font-family: 'Poppins', sans-serif; font-size: 0.78rem; font-weight: 500;
    color: var(--navy); cursor: pointer; outline: none;
    transition: border-color 0.18s, box-shadow 0.18s;
    min-width: 145px;
  }
  .filter-select:focus {
    border-color: var(--red);
    box-shadow: 0 0 0 3px rgba(140,21,21,0.08);
  }

  .filter-search {
    flex: 1; min-width: 180px;
    position: relative;
  }
  .filter-search svg {
    position: absolute; left: 10px; top: 50%; transform: translateY(-50%);
    color: #bbb; pointer-events: none;
  }
  .filter-search input {
    width: 100%;
    background: var(--stone); border: 1.5px solid var(--stone-mid);
    border-radius: 9px; padding: 7px 12px 7px 32px;
    font-family: 'Poppins', sans-serif; font-size: 0.78rem;
    color: var(--navy); outline: none;
    transition: border-color 0.18s, box-shadow 0.18s, background 0.18s;
  }
  .filter-search input::placeholder { color: #bbb; }
  .filter-search input:focus {
    border-color: var(--red); background: #fff;
    box-shadow: 0 0 0 3px rgba(140,21,21,0.08);
  }

  .filter-divider { width: 1px; height: 28px; background: var(--stone-mid); margin: 0 0.25rem; flex-shrink: 0; }

  .btn-reset {
    display: flex; align-items: center; gap: 6px;
    font-size: 0.73rem; font-weight: 700; color: #aaa;
    background: none; border: none; cursor: pointer; padding: 7px 10px;
    border-radius: 8px; transition: color 0.18s, background 0.18s;
    white-space: nowrap;
  }
  .btn-reset:hover { color: var(--red); background: var(--red-muted); }

  /* Active filter pill */
  .filter-pills { display: flex; gap: 6px; flex-wrap: wrap; }
  .filter-pill {
    display: inline-flex; align-items: center; gap: 5px;
    font-size: 0.65rem; font-weight: 700; padding: 3px 9px;
    border-radius: 999px; background: var(--red-muted); color: var(--red);
    border: 1px solid rgba(140,21,21,0.15); cursor: pointer;
    transition: background 0.15s;
  }
  .filter-pill:hover { background: #f0c0c0; }
  .filter-pill .pill-x { font-size: 0.7rem; opacity: 0.6; }

  /* ═══════════════════════════════════════
     TABLE CARD
  ═══════════════════════════════════════ */
  .table-card {
    background: var(--white);
    border: 1px solid var(--stone-mid);
    border-radius: 14px;
    overflow: hidden;
  }

  .table-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 1.2rem 1.5rem 1rem;
    border-bottom: 1px solid var(--stone-mid);
    flex-wrap: wrap; gap: 0.75rem;
  }
  .table-title { font-weight: 800; font-size: 0.9rem; color: var(--navy); }
  .table-sub   { font-size: 0.7rem; color: #aaa; margin-top: 2px; }

  .table-actions { display: flex; align-items: center; gap: 0.5rem; }

  .btn-export {
    display: flex; align-items: center; gap: 6px;
    font-size: 0.72rem; font-weight: 700; padding: 7px 14px;
    border-radius: 8px; border: 1.5px solid var(--stone-mid);
    background: transparent; color: var(--navy); cursor: pointer;
    transition: all 0.18s;
  }
  .btn-export:hover { border-color: var(--red); color: var(--red); background: var(--red-muted); }

  /* Table itself */
  .risk-table { width: 100%; border-collapse: collapse; }

  .risk-table thead tr {
    background: var(--stone);
  }
  .risk-table th {
    font-size: 0.62rem; font-weight: 800; letter-spacing: 0.1em;
    text-transform: uppercase; color: #aaa;
    padding: 10px 16px; text-align: left;
    white-space: nowrap; border-bottom: 1px solid var(--stone-mid);
  }
  .risk-table th.sortable { cursor: pointer; user-select: none; }
  .risk-table th.sortable:hover { color: var(--navy); }
  .sort-icon { opacity: 0.4; margin-left: 4px; }
  .risk-table th.sorted .sort-icon { opacity: 1; color: var(--red); }

  .risk-table tbody tr {
    border-bottom: 1px solid var(--stone-mid);
    transition: background 0.15s;
    animation: rowIn 0.4s cubic-bezier(0.34,1.1,0.64,1) both;
  }
  .risk-table tbody tr:last-child { border-bottom: none; }
  .risk-table tbody tr:hover { background: var(--stone); }

  /* Staggered row animation */
  {% for i in "123456789012345678901" %}
  .risk-table tbody tr:nth-child({{ forloop.counter }}) { animation-delay: {{ forloop.counter0 }}0ms; }
  {% endfor %}
  @keyframes rowIn { from { opacity:0; transform:translateX(-6px); } to { opacity:1; transform:translateX(0); } }

  .risk-table td { padding: 13px 16px; font-size: 0.8rem; color: var(--navy); vertical-align: middle; }

  /* Rank badge */
  .rank-badge {
    width: 26px; height: 26px; border-radius: 7px;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.65rem; font-weight: 800;
    background: var(--stone); color: #aaa;
  }
  .rank-badge.top3 { background: linear-gradient(135deg, #2e2b28, #1a1917); color: #fff; }

  /* Avatar */
  .customer-av {
    width: 34px; height: 34px; border-radius: 9px;
    display: flex; align-items: center; justify-content: center;
    font-weight: 800; font-size: 0.68rem; color: #fff; flex-shrink: 0;
  }

  /* Risk score badge */
  .risk-badge {
    display: inline-flex; align-items: center; gap: 5px;
    padding: 4px 10px; border-radius: 999px;
    font-size: 0.68rem; font-weight: 800; white-space: nowrap;
  }
  .risk-badge::before { content:''; width:5px; height:5px; border-radius:50%; background:currentColor; flex-shrink:0; }
  .risk-badge.high   { background: rgba(140,21,21,0.1);  color: var(--red);  border: 1px solid rgba(140,21,21,0.15); }
  .risk-badge.medium { background: rgba(201,168,76,0.12); color: #92400e;    border: 1px solid rgba(201,168,76,0.2); }
  .risk-badge.low    { background: rgba(5,150,105,0.1);  color: #059669;    border: 1px solid rgba(5,150,105,0.15); }

  /* Risk score bar under badge */
  .risk-bar-wrap { margin-top: 5px; height: 3px; background: var(--stone-mid); border-radius: 99px; overflow:hidden; width: 80px; }
  .risk-bar-fill { height: 100%; border-radius: 99px; }
  .risk-badge.high   ~ .risk-bar-wrap .risk-bar-fill { background: var(--red); }
  .risk-badge.medium ~ .risk-bar-wrap .risk-bar-fill { background: var(--gold); }
  .risk-badge.low    ~ .risk-bar-wrap .risk-bar-fill { background: #059669; }

  /* Driver pill */
  .driver-pill {
    display: inline-flex; align-items: center; gap: 5px;
    font-size: 0.65rem; font-weight: 700; padding: 3px 9px;
    border-radius: 6px; background: var(--stone);
    color: #666; border: 1px solid var(--stone-mid);
    white-space: nowrap;
  }

  /* Action buttons */
  .btn-view {
    display: inline-flex; align-items: center; gap: 5px;
    font-size: 0.68rem; font-weight: 700; padding: 6px 13px;
    border-radius: 8px; border: 1.5px solid var(--stone-mid);
    background: transparent; color: var(--navy); cursor: pointer;
    text-decoration: none; transition: all 0.18s; white-space: nowrap;
  }
  .btn-view:hover { border-color: var(--red); color: var(--red); background: var(--red-muted); }

  .btn-analyze {
    display: inline-flex; align-items: center; gap: 5px;
    font-size: 0.68rem; font-weight: 700; padding: 6px 13px;
    border-radius: 8px; border: none;
    background: var(--navy); color: #fff; cursor: pointer;
    text-decoration: none; transition: all 0.18s; white-space: nowrap;
  }
  .btn-analyze:hover { background: var(--red); box-shadow: 0 4px 14px var(--red-glow); }

  /* Customer ID style */
  .cid { font-size: 0.62rem; color: #bbb; font-weight: 600; margin-top: 2px; font-family: monospace; letter-spacing: 0.03em; }

  /* ── Pagination ── */
  .pagination {
    display: flex; align-items: center; justify-content: space-between;
    padding: 1rem 1.5rem; border-top: 1px solid var(--stone-mid);
    flex-wrap: wrap; gap: 0.75rem;
  }
  .page-info { font-size: 0.73rem; color: #aaa; font-weight: 500; }
  .page-info strong { color: var(--navy); }
  .page-btns { display: flex; gap: 4px; }
  .page-btn {
    width: 32px; height: 32px; border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.75rem; font-weight: 700; cursor: pointer;
    border: 1.5px solid var(--stone-mid); background: transparent;
    color: var(--navy); transition: all 0.15s;
  }
  .page-btn:hover   { border-color: var(--red); color: var(--red); background: var(--red-muted); }
  .page-btn.active  { background: var(--navy); color: #fff; border-color: var(--navy); }
  .page-btn.disabled { opacity: 0.35; pointer-events: none; }

  /* ── Empty state ── */
  .empty-state {
    padding: 3rem 2rem; text-align: center; display: none;
  }
  .empty-state.visible { display: block; }
  .empty-icon { font-size: 2.5rem; margin-bottom: 0.75rem; opacity: 0.3; }
  .empty-title { font-weight: 800; color: var(--navy); margin-bottom: 6px; }
  .empty-sub   { font-size: 0.78rem; color: #bbb; }

  /* ── Responsive ── */
  @media (max-width: 1100px) {
    .summary-row { grid-template-columns: repeat(2,1fr); }
  }
  @media (max-width: 768px) {
    .risk-page { padding: 1.25rem; gap: 1.1rem; }
    .summary-row { grid-template-columns: repeat(2,1fr); gap: 0.625rem; }
    .filter-bar  { gap: 0.5rem; }
    .filter-select { min-width: 120px; }
    .risk-table th:nth-child(5),
    .risk-table td:nth-child(5) { display: none; }
  }
  @media (max-width: 540px) {
    .summary-row { grid-template-columns: 1fr 1fr; }
    .risk-table th:nth-child(6),
    .risk-table td:nth-child(6) { display: none; }
  }

  /* Risk page mobile/table overflow handling */
  .risk-page .table-card {
    max-width: 100%;
    overflow: hidden;
  }
  .risk-page .table-card > div[style*="overflow-x:auto"] {
    -webkit-overflow-scrolling: touch;
  }
  @media (max-width: 768px) {
    .risk-page .filter-select,
    .risk-page .filter-search {
      min-width: 0;
      width: 100%;
    }
  }


