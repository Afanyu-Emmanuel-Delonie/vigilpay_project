{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VigilPay — Verify OTP</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Poppins:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="{% static 'styles/app.css' %}" />
  </head>
  <body class="login-page">
    <div class="page">

      <!-- ══════════════════════════════
           LEFT PANEL
      ══════════════════════════════ -->
      <div class="panel-left">
        <!-- Decorative arcs SVG -->
        <svg
          class="arcs"
          viewBox="0 0 600 600"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          aria-hidden="true"
        >
          <circle class="arc-animate a1" cx="600" cy="0" r="200" stroke="rgba(255,255,255,0.5)" stroke-width="0.8" />
          <circle class="arc-animate a2" cx="600" cy="0" r="300" stroke="rgba(255,255,255,0.4)" stroke-width="0.7" />
          <circle class="arc-animate a3" cx="600" cy="0" r="400" stroke="rgba(255,255,255,0.3)" stroke-width="0.6" />
          <circle class="arc-animate a4" cx="600" cy="0" r="500" stroke="rgba(255,255,255,0.2)" stroke-width="0.5" />
        </svg>

        <!-- Logo -->
        <a href="/" class="logo">
          <div class="logo-icon">
            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
              <path d="M10 2.5L16.5 6v8L10 17.5 3.5 14V6L10 2.5z" stroke="white" stroke-width="1.7" fill="none" stroke-linejoin="round" />
              <circle cx="10" cy="10" r="2.4" fill="white" />
            </svg>
          </div>
          <span class="logo-text">Vigil<span>Pay</span></span>
        </a>

        <!-- Hero text -->
        <div class="left-hero">
          <div class="left-tag">Secure Banking Intelligence</div>
          <h2 class="left-title">
            One<br />
            Step<em> Away</em><br />
            From Access.
          </h2>
          <p class="left-desc">
            Your one-time passcode was sent instantly and expires shortly.
            VigilPay uses time-locked OTPs to keep your account safe from
            unauthorized access.
          </p>
        </div>

        <!-- Stats -->
        <div class="left-stats">
          <div class="lstat">
            <div class="lstat-num">500<span>k</span></div>
            <div class="lstat-label">Active Users</div>
          </div>
          <div class="lstat-divider"></div>
          <div class="lstat">
            <div class="lstat-num">99<span>%</span></div>
            <div class="lstat-label">Uptime SLA</div>
          </div>
          <div class="lstat-divider"></div>
          <div class="lstat">
            <div class="lstat-num">40<span>+</span></div>
            <div class="lstat-label">Partner Banks</div>
          </div>
        </div>

        <p class="left-copy">© 2026 VigilPay Technologies Ltd. All rights reserved.</p>
      </div>

      <!-- ══════════════════════════════
           RIGHT PANEL
      ══════════════════════════════ -->
      <div class="panel-right">
        <div class="form-wrap">

          <!-- Brand on right -->
          <div class="right-brand">
            <div class="right-brand-icon">
              <svg width="15" height="15" viewBox="0 0 20 20" fill="none">
                <path d="M10 2.5L16.5 6v8L10 17.5 3.5 14V6L10 2.5z" stroke="white" stroke-width="1.7" fill="none" stroke-linejoin="round" />
                <circle cx="10" cy="10" r="2.4" fill="white" />
              </svg>
            </div>
            <span class="right-brand-text">Vigil<span>Pay</span></span>
          </div>

          <!-- Heading -->
          <div class="form-heading">
            <h1>Verify OTP</h1>
            <p>
              We sent a 6-digit OTP to <strong>{{ email }}</strong>.
              {% if purpose == 'registration' %}Verify to complete registration.{% else %}Verify to continue password reset.{% endif %}
            </p>
          </div>

          {% if messages %}
          <div style="margin-bottom: 1rem; color: #8c1515; font-size: 0.78rem; font-weight: 600;">
            {% for message in messages %}
            <p>{{ message }}</p>
            {% endfor %}
          </div>
          {% endif %}

          <!-- OTP Form -->
          <form
            class="form-body"
            method="post"
            action="{% url 'verify_otp_page' %}"
            novalidate
          >
            {% csrf_token %}

            <div class="field" id="field-otp-code">
              <label for="otp_code">OTP Code</label>
              <div class="field-input-wrap">
                <span class="field-icon">
                  <svg width="15" height="15" viewBox="0 0 20 20" fill="none">
                    <rect x="3" y="4" width="14" height="12" rx="1.5" stroke="currentColor" stroke-width="1.5" />
                    <path d="M7 9h6M7 12h4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                  </svg>
                </span>
                <input
                  type="text"
                  id="otp_code"
                  name="otp_code"
                  value="{{ form.data.otp_code|default:'' }}"
                  placeholder="123456"
                  inputmode="numeric"
                  maxlength="6"
                  autocomplete="one-time-code"
                  required
                />
              </div>
              <span class="field-error" id="otp-error">Please enter the 6-digit OTP.</span>
            </div>

            <!-- Submit -->
            <button type="submit" class="btn-login" id="verifyBtn">
              <span class="btn-text">Verify OTP</span>
              <svg class="spinner" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="rgba(255,255,255,0.25)" stroke-width="3" />
                <path d="M12 2a10 10 0 0110 10" stroke="white" stroke-width="3" stroke-linecap="round" />
              </svg>
            </button>
          </form>

          <!-- Resend Form -->
          <form method="post" action="{% url 'verify_otp_page' %}" style="margin-top: 0.75rem;">
            {% csrf_token %}
            <input type="hidden" name="action" value="resend" />
            <button type="submit" class="btn-login" style="background: transparent; border: 1.5px solid currentColor; color: inherit;">
              <span class="btn-text">Resend OTP</span>
            </button>
          </form>

          <p class="signup-row">
            Wrong account? <a href="{% url 'login_page' %}">Back to Login</a>
          </p>
        </div>
      </div>

    </div>
    <script src="{% static 'scripts/app.js' %}"></script>
  </body>
</html>