{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VigilPay — Login</title>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,700&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --red:       #8C1515;
      --red-dark:  #6A0F0F;
      --red-muted: #F5E6E6;
      --red-glow:  rgba(140,21,21,0.35);
      --navy:      #252422;
      --navy-dark: #1a1917;
      --navy-mid:  #2e2b28;
      --gold:      #C9A84C;
      --gold-light:#E8C97A;
      --stone:     #F6F4F1;
      --stone-mid: #E8E3DC;
      --white:     #ffffff;
    }

    html, body {
      height: 100%;
      font-family: 'Poppins', sans-serif;
      background: var(--stone);
      overflow: hidden;
    }

    /* ── LAYOUT ── */
    .page {
      display: grid;
      grid-template-columns: 1fr 1fr;
      height: 100vh;
      width: 100vw;
    }

    /* ══════════════════════════
       LEFT PANEL
    ══════════════════════════ */
    .panel-left {
      position: relative;
      overflow: hidden;
      background: linear-gradient(160deg, #252422 0%, #1a1917 50%, #2a1010 100%);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 3rem 3.5rem;
    }

    /* Red radial glow */
    .panel-left::before {
      content: '';
      position: absolute;
      inset: 0;
      background:
        radial-gradient(ellipse 700px 600px at 110% 30%, rgba(140,21,21,0.45) 0%, transparent 60%),
        radial-gradient(ellipse 400px 400px at -10% 80%, rgba(201,168,76,0.08) 0%, transparent 55%);
      pointer-events: none;
    }

    /* Noise grain */
    .panel-left::after {
      content: '';
      position: absolute;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 512 512' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events: none;
    }

    /* Decorative arcs — like the reference */
    .arcs {
      position: absolute;
      top: -80px;
      right: -120px;
      width: 600px;
      height: 600px;
      pointer-events: none;
      opacity: 0.1;
    }
    .arcs circle {
      fill: none;
      stroke: rgba(255,255,255,0.6);
      stroke-width: 1;
    }

    /* Left content */
    .left-content { position: relative; z-index: 2; }

    /* Logo */
    .logo {
      display: flex;
      align-items: center;
      gap: 9px;
      text-decoration: none;
      opacity: 0;
      animation: fadeUp 0.6s 0.1s forwards;
    }
    .logo-icon {
      width: 36px;
      height: 36px;
      background: var(--red);
      border-radius: 9px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 20px var(--red-glow);
    }
    .logo-text {
      font-weight: 800;
      font-size: 1.1rem;
      color: var(--white);
      letter-spacing: -0.02em;
    }
    .logo-text span { color: var(--red); }

    /* Hero text */
    .left-hero {
      position: relative;
      z-index: 2;
      margin-top: auto;
      padding-bottom: 1rem;
    }
    .left-tag {
      display: inline-flex;
      align-items: center;
      gap: 7px;
      background: rgba(140,21,21,0.2);
      border: 1px solid rgba(140,21,21,0.4);
      border-radius: 999px;
      padding: 4px 12px;
      font-size: 0.6rem;
      font-weight: 700;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(255,255,255,0.7);
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeUp 0.6s 0.25s forwards;
    }
    .left-tag::before {
      content: '';
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: var(--red);
      animation: pulse-dot 2s ease-in-out infinite;
    }

    .left-title {
      font-family: 'Playfair Display', serif;
      font-weight: 900;
      font-size: clamp(2.4rem, 3.5vw, 3.6rem);
      line-height: 1.06;
      color: var(--white);
      letter-spacing: -0.02em;
      margin-bottom: 1.5rem;
      opacity: 0;
      animation: fadeUp 0.6s 0.35s forwards;
    }
    .left-title em {
      font-style: italic;
      color: var(--gold-light);
    }
    .left-title .wave { font-style: normal; }

    .left-desc {
      font-size: 0.875rem;
      line-height: 1.75;
      color: rgba(255,255,255,0.42);
      max-width: 360px;
      opacity: 0;
      animation: fadeUp 0.6s 0.45s forwards;
    }

    /* Stats strip at bottom of left */
    .left-stats {
      position: relative;
      z-index: 2;
      display: flex;
      gap: 28px;
      padding-top: 2rem;
      border-top: 1px solid rgba(255,255,255,0.06);
      opacity: 0;
      animation: fadeUp 0.6s 0.55s forwards;
    }
    .lstat { display: flex; flex-direction: column; gap: 2px; }
    .lstat-num   { font-family: 'Playfair Display', serif; font-weight: 700; font-size: 1.3rem; color: var(--white); line-height: 1; }
    .lstat-num span { color: var(--red); }
    .lstat-label { font-size: 0.62rem; color: rgba(255,255,255,0.32); font-weight: 500; letter-spacing: 0.04em; }
    .lstat-divider { width: 1px; background: rgba(255,255,255,0.08); align-self: stretch; }

    /* Copyright */
    .left-copy {
      position: relative;
      z-index: 2;
      font-size: 0.68rem;
      color: rgba(255,255,255,0.22);
      font-weight: 400;
      margin-top: 1.25rem;
    }

    /* ══════════════════════════
       RIGHT PANEL
    ══════════════════════════ */
    .panel-right {
      background: var(--white);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 3rem 3.5rem;
      position: relative;
      overflow: hidden;
    }

    /* Subtle decorative circle in top-right corner */
    .panel-right::before {
      content: '';
      position: absolute;
      top: -100px;
      right: -100px;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(140,21,21,0.04) 0%, transparent 70%);
      pointer-events: none;
    }

    .form-wrap {
      width: 100%;
      max-width: 400px;
      position: relative;
      z-index: 2;
    }

    /* Brand mark on right */
    .right-brand {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 2.75rem;
      opacity: 0;
      animation: fadeUp 0.6s 0.15s forwards;
    }
    .right-brand-icon {
      width: 30px;
      height: 30px;
      background: var(--red);
      border-radius: 7px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .right-brand-text {
      font-weight: 800;
      font-size: 0.95rem;
      color: var(--navy);
      letter-spacing: -0.02em;
    }
    .right-brand-text span { color: var(--red); }

    /* Form heading */
    .form-heading {
      opacity: 0;
      animation: fadeUp 0.6s 0.25s forwards;
      margin-bottom: 2rem;
    }
    .form-heading h1 {
      font-family: 'Playfair Display', serif;
      font-weight: 900;
      font-size: 2rem;
      color: var(--navy);
      letter-spacing: -0.025em;
      margin-bottom: 0.5rem;
      line-height: 1.1;
    }
    .form-heading p {
      font-size: 0.8rem;
      color: #888;
      line-height: 1.6;
    }
    .form-heading p a {
      color: var(--red);
      font-weight: 600;
      text-decoration: none;
    }
    .form-heading p a:hover { text-decoration: underline; }

    /* Form fields */
    .form-body {
      display: flex;
      flex-direction: column;
      gap: 1.1rem;
      opacity: 0;
      animation: fadeUp 0.6s 0.35s forwards;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .field label {
      font-size: 0.72rem;
      font-weight: 700;
      color: var(--navy);
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }
    .field-input-wrap {
      position: relative;
      display: flex;
      align-items: center;
    }
    .field-icon {
      position: absolute;
      left: 14px;
      color: #aaa;
      display: flex;
      align-items: center;
      pointer-events: none;
      transition: color 0.2s;
    }
    .field input {
      width: 100%;
      padding: 0.8rem 1rem 0.8rem 2.75rem;
      border: 1.5px solid var(--stone-mid);
      border-radius: 10px;
      font-family: 'Poppins', sans-serif;
      font-size: 0.875rem;
      color: var(--navy);
      background: var(--stone);
      transition: border-color 0.2s, background 0.2s, box-shadow 0.2s;
      outline: none;
    }
    .field input::placeholder { color: #bbb; }
    .field input:focus {
      border-color: var(--red);
      background: var(--white);
      box-shadow: 0 0 0 3px rgba(140,21,21,0.08);
    }
    .field input:focus + .field-icon,
    .field-input-wrap:focus-within .field-icon { color: var(--red); }

    /* Password toggle */
    .pw-toggle {
      position: absolute;
      right: 14px;
      background: none;
      border: none;
      cursor: pointer;
      color: #bbb;
      display: flex;
      align-items: center;
      transition: color 0.2s;
      padding: 0;
    }
    .pw-toggle:hover { color: var(--navy); }

    /* Forgot password row */
    .forgot-row {
      display: flex;
      justify-content: flex-end;
      margin-top: -4px;
    }
    .forgot-link {
      font-size: 0.75rem;
      color: #999;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }
    .forgot-link:hover { color: var(--red); }

    /* Submit button */
    .btn-login {
      width: 100%;
      padding: 0.9rem;
      background: var(--navy);
      color: var(--white);
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
      font-size: 0.9rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s, transform 0.15s, box-shadow 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      letter-spacing: 0.01em;
      margin-top: 0.5rem;
      position: relative;
      overflow: hidden;
    }
    .btn-login::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(140,21,21,0.15) 0%, transparent 60%);
      opacity: 0;
      transition: opacity 0.2s;
    }
    .btn-login:hover {
      background: var(--red);
      transform: translateY(-1px);
      box-shadow: 0 8px 28px rgba(140,21,21,0.35);
    }
    .btn-login:hover::after { opacity: 1; }
    .btn-login:active { transform: translateY(0); }

    /* Divider */
    .divider {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 0.25rem 0;
    }
    .divider::before, .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background: var(--stone-mid);
    }
    .divider span {
      font-size: 0.68rem;
      color: #ccc;
      font-weight: 500;
      white-space: nowrap;
    }

    /* Sign up link */
    .signup-row {
      text-align: center;
      font-size: 0.78rem;
      color: #999;
      margin-top: 1rem;
      opacity: 0;
      animation: fadeUp 0.6s 0.45s forwards;
    }
    .signup-row a {
      color: var(--red);
      font-weight: 700;
      text-decoration: none;
    }
    .signup-row a:hover { text-decoration: underline; }

    /* Error state */
    .field.error input {
      border-color: var(--red);
      background: var(--white);
    }
    .field-error {
      font-size: 0.68rem;
      color: var(--red);
      font-weight: 600;
      display: none;
    }
    .field.error .field-error { display: block; }

    /* Loading spinner on button */
    .spinner {
      display: none;
      width: 16px;
      height: 16px;
      border: 2px solid rgba(255,255,255,0.35);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.7s linear infinite;
    }
    .btn-login.loading .btn-text { display: none; }
    .btn-login.loading .spinner  { display: block; }

    /* ── ANIMATIONS ── */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(18px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes pulse-dot {
      0%,100% { transform: scale(1); opacity: 1; }
      50%      { transform: scale(1.7); opacity: 0.4; }
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    @keyframes shimmerArc {
      0%   { stroke-dashoffset: 1600; }
      100% { stroke-dashoffset: 0; }
    }

    /* Animated arcs draw-on */
    .arcs .arc-animate {
      stroke-dasharray: 1600;
      stroke-dashoffset: 1600;
      animation: shimmerArc 3s ease forwards;
    }
    .arcs .a1 { animation-delay: 0.2s; }
    .arcs .a2 { animation-delay: 0.5s; }
    .arcs .a3 { animation-delay: 0.8s; }
    .arcs .a4 { animation-delay: 1.1s; }

    /* ── RESPONSIVE ── */
    @media (max-width: 900px) {
      html, body { overflow: auto; }
      .page {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr;
        height: auto;
        min-height: 100vh;
      }
      .panel-left {
        padding: 2.5rem 2rem;
        min-height: 340px;
      }
      .left-hero { margin-top: 2rem; }
      .left-title { font-size: 2rem; }
      .left-stats { gap: 18px; }
      .panel-right { padding: 3rem 2rem; overflow: auto; }
    }
  </style>
</head>
<body>

<div class="page">

  <!-- ══════════════════════════════
       LEFT PANEL
  ══════════════════════════════ -->
  <div class="panel-left">

    <!-- Decorative arcs SVG (like the reference) -->
    <svg class="arcs" viewBox="0 0 600 600" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <circle class="arc-animate a1" cx="600" cy="0" r="200" stroke="rgba(255,255,255,0.5)" stroke-width="0.8"/>
      <circle class="arc-animate a2" cx="600" cy="0" r="300" stroke="rgba(255,255,255,0.4)" stroke-width="0.7"/>
      <circle class="arc-animate a3" cx="600" cy="0" r="400" stroke="rgba(255,255,255,0.3)" stroke-width="0.6"/>
      <circle class="arc-animate a4" cx="600" cy="0" r="500" stroke="rgba(255,255,255,0.2)" stroke-width="0.5"/>
    </svg>

    <!-- Logo -->
    <a href="/" class="logo">
      <div class="logo-icon">
        <svg width="18" height="18" viewBox="0 0 20 20" fill="none">
          <path d="M10 2.5L16.5 6v8L10 17.5 3.5 14V6L10 2.5z" stroke="white" stroke-width="1.7" fill="none" stroke-linejoin="round"/>
          <circle cx="10" cy="10" r="2.4" fill="white"/>
        </svg>
      </div>
      <span class="logo-text">Vigil<span>Pay</span></span>
    </a>

    <!-- Hero text -->
    <div class="left-hero">
      <div class="left-tag">Secure Banking Intelligence</div>
      <h2 class="left-title">
        Hello,<br/>
        Welcome<em></em><br/>
        Back!
      </h2>
      <p class="left-desc">
        Skip repetitive financial risks. VigilPay protects your cards with real-time churn intelligence — so you stay ahead, always.
      </p>
    </div>

    <!-- Stats -->
    <div class="left-stats">
      <div class="lstat">
        <div class="lstat-num">1.24<span>M</span></div>
        <div class="lstat-label">Active Users</div>
      </div>
      <div class="lstat-divider"></div>
      <div class="lstat">
        <div class="lstat-num">99<span>%</span></div>
        <div class="lstat-label">Uptime SLA</div>
      </div>
      <div class="lstat-divider"></div>
      <div class="lstat">
        <div class="lstat-num">40<span>+</span></div>
        <div class="lstat-label">Partner Banks</div>
      </div>
    </div>

    <p class="left-copy">© 2025 VigilPay Technologies Ltd. All rights reserved.</p>
  </div>

  <!-- ══════════════════════════════
       RIGHT PANEL
  ══════════════════════════════ -->
  <div class="panel-right">
    <div class="form-wrap">

      <!-- Brand on right -->
      <div class="right-brand">
        <div class="right-brand-icon">
          <svg width="15" height="15" viewBox="0 0 20 20" fill="none">
            <path d="M10 2.5L16.5 6v8L10 17.5 3.5 14V6L10 2.5z" stroke="white" stroke-width="1.7" fill="none" stroke-linejoin="round"/>
            <circle cx="10" cy="10" r="2.4" fill="white"/>
          </svg>
        </div>
        <span class="right-brand-text">Vigil<span>Pay</span></span>
      </div>

      <!-- Heading -->
      <div class="form-heading">
        <h1>Welcome Back!</h1>
        <p>Don't have an account? <a href="/register">Create one now</a> — it's FREE!</p>
      </div>

      <!-- Form -->
      <form class="form-body" id="loginForm" novalidate>

        <!-- Email -->
        <div class="field" id="field-email">
          <label for="email">Email Address</label>
          <div class="field-input-wrap">
            <span class="field-icon">
              <svg width="15" height="15" viewBox="0 0 20 20" fill="none">
                <path d="M3 5h14a1 1 0 011 1v9a1 1 0 01-1 1H3a1 1 0 01-1-1V6a1 1 0 011-1z" stroke="currentColor" stroke-width="1.5"/>
                <path d="M2 6l8 6 8-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </span>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="you@example.com"
              autocomplete="email"
              spellcheck="false"
            />
          </div>
          <span class="field-error" id="email-error">Please enter a valid email address.</span>
        </div>

        <!-- Password -->
        <div class="field" id="field-password">
          <label for="password">Password</label>
          <div class="field-input-wrap">
            <span class="field-icon">
              <svg width="15" height="15" viewBox="0 0 20 20" fill="none">
                <rect x="4" y="9" width="12" height="9" rx="1.5" stroke="currentColor" stroke-width="1.5"/>
                <path d="M7 9V6a3 3 0 016 0v3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </span>
            <input
              type="password"
              id="password"
              name="password"
              placeholder="Enter your password"
              autocomplete="current-password"
            />
            <button type="button" class="pw-toggle" id="pw-toggle" aria-label="Toggle password visibility">
              <svg id="eye-icon" width="16" height="16" viewBox="0 0 20 20" fill="none">
                <path d="M1 10s3.5-6 9-6 9 6 9 6-3.5 6-9 6-9-6-9-6z" stroke="currentColor" stroke-width="1.5"/>
                <circle cx="10" cy="10" r="2.5" stroke="currentColor" stroke-width="1.5"/>
              </svg>
            </button>
          </div>
          <span class="field-error" id="password-error">Password is required.</span>
        </div>

        <!-- Forgot -->
        <div class="forgot-row">
          <a href="/forgot-password" class="forgot-link">Forgot password?</a>
        </div>

        <!-- Submit -->
        <button type="submit" class="btn-login" id="loginBtn">
          <span class="btn-text">Login Now</span>
          <svg class="spinner" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="10" stroke="rgba(255,255,255,0.25)" stroke-width="3"/>
            <path d="M12 2a10 10 0 0110 10" stroke="white" stroke-width="3" stroke-linecap="round"/>
          </svg>
        </button>

      </form>

      <!-- Sign up -->
      <p class="signup-row">
        New to VigilPay? <a href="/register">Create an account</a>
      </p>

    </div>
  </div>

</div>

<script>
  // ── Password visibility toggle ─────────────
  const pwToggle = document.getElementById('pw-toggle');
  const pwInput  = document.getElementById('password');
  const eyeIcon  = document.getElementById('eye-icon');

  const eyeOpen = `<path d="M1 10s3.5-6 9-6 9 6 9 6-3.5 6-9 6-9-6-9-6z" stroke="currentColor" stroke-width="1.5"/><circle cx="10" cy="10" r="2.5" stroke="currentColor" stroke-width="1.5"/>`;
  const eyeOff  = `<path d="M3 3l14 14M10.5 6A9.2 9.2 0 0119 10s-1.3 2.5-3.8 4.2M6.5 6.5C3.9 8 2 10 2 10s3.5 6 8 6c1.5 0 2.9-.4 4.1-1.1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>`;

  pwToggle.addEventListener('click', () => {
    const isHidden = pwInput.type === 'password';
    pwInput.type = isHidden ? 'text' : 'password';
    eyeIcon.innerHTML = isHidden ? eyeOff : eyeOpen;
  });

  // ── Form validation & submit ───────────────
  const form      = document.getElementById('loginForm');
  const loginBtn  = document.getElementById('loginBtn');
  const emailFld  = document.getElementById('field-email');
  const passFld   = document.getElementById('field-password');
  const emailInp  = document.getElementById('email');
  const passInp   = document.getElementById('password');

  function validateEmail(v) { return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); }

  emailInp.addEventListener('input', () => {
    if (emailFld.classList.contains('error') && validateEmail(emailInp.value.trim())) {
      emailFld.classList.remove('error');
    }
  });
  passInp.addEventListener('input', () => {
    if (passFld.classList.contains('error') && passInp.value.length > 0) {
      passFld.classList.remove('error');
    }
  });

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    let valid = true;

    if (!validateEmail(emailInp.value.trim())) {
      emailFld.classList.add('error');
      valid = false;
    } else {
      emailFld.classList.remove('error');
    }

    if (passInp.value.length === 0) {
      passFld.classList.add('error');
      valid = false;
    } else {
      passFld.classList.remove('error');
    }

    if (!valid) return;

    // Show loading
    loginBtn.classList.add('loading');
    loginBtn.disabled = true;

    // ── Submit to Django view ──────────────────
    // Replace the timeout below with your actual fetch/form submit:
    //
    // const resp = await fetch('/login/', {
    //   method: 'POST',
    //   headers: { 'X-CSRFToken': getCookie('csrftoken'), 'Content-Type': 'application/json' },
    //   body: JSON.stringify({ email: emailInp.value.trim(), password: passInp.value })
    // });
    // if (resp.ok) { window.location.href = '/dashboard/'; }
    // else { showError(); }

    setTimeout(() => {
      loginBtn.classList.remove('loading');
      loginBtn.disabled = false;
      // Simulate: remove this in production
      form.submit();
    }, 1400);
  });

  // CSRF helper for Django
  function getCookie(name) {
    let cv = null;
    if (document.cookie && document.cookie !== '') {
      for (const c of document.cookie.split(';')) {
        const t = c.trim();
        if (t.startsWith(name + '=')) { cv = decodeURIComponent(t.slice(name.length + 1)); break; }
      }
    }
    return cv;
  }
</script>
</body>
</html>